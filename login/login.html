<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login & Registrasi - Website Responsif</title>
    <!--Additional CSS-->
    <link rel="stylesheet" href="assets/css/style.css" />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar">
      <!--  <div class="logo">MyWebsite</div> -->
      <a href="../index.html" class="logo-link">
        <img
          src="assets/images/img/logo.png"
          alt="logo"
          width="100%"
          height="100%"
        />
      </a>
    </nav>
    <div class="container" id="form-container">
      <h2 id="form-title">Masuk ke Akun</h2>
      <h5 id="form-title-1">Yuk, daftarkan akunmu sekarang juga!</h5>
      <form id="auth-form">
        <div class="form-group">
          <label for="email">Email</label>
          <input
            type="email"
            id="email"
            placeholder="Masukkan email"
            required
          />
        </div>
        <div class="form-group">
          <label for="password">Kata Sandi</label>
          <input
            type="password"
            id="password"
            placeholder="Masukkan kata sandi"
            required
          />
        </div>
        <div class="form-check">
          <input type="checkbox" id="showPass" onclick="showHide()" />
          <label for="showPass">Tampilkan Password</label>
        </div>
        <div class="forgot">
          <a href="#" id="forgot-link">Lupa kata sandi?</a>
        </div>
        <button type="submit">Masuk</button>
      </form>

      <div class="divider">atau</div>

      <!-- Tombol Google -->
      <div
        id="g_id_onload"
        data-client_id="ISI_CLIENT_ID_GOOGLE_MU.apps.googleusercontent.com"
        data-context="signin"
        data-ux_mode="popup"
        data-callback="handleCredentialResponse"
        data-auto_prompt="false"
      ></div>

      <div
        class="g_id_signin"
        data-type="standard"
        data-shape="rectangular"
        data-theme="outline"
        data-text="signin_with"
        data-size="large"
        data-logo_alignment="left"
      ></div>

      <div class="switch">
        <p id="switch-text">
          Belum punya akun? <a href="#" id="switch-link">Daftar</a>
        </p>
      </div>
    </div>

    <script>
      const formTitle = document.getElementById("form-title");
      const authForm = document.getElementById("auth-form");
      const switchText = document.getElementById("switch-text");
      const switchLink = document.getElementById("switch-link");
      let isLogin = true;

      // Ganti Login √¢‚Ä†‚Äù Registrasi
      function toggleForm() {
        if (isLogin) {
          formTitle.innerText = "Pendaftaran Akun";
          authForm.innerHTML = `
          <div class="form-group">
            <label for="name">Nama Lengkap</label>
            <input type="text" id="name" placeholder="Masukkan nama lengkap" required>
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" placeholder="Masukkan email" required>
          </div>
          <div class="form-group">
            <label for="phone">Nomor Telepon</label>
            <div class="phone-group">
              <select id="country-code" required>
                <option value="+62">üáÆüá© +62</option>
                <option value="+60">üá≤üáæ +60</option>
                <option value="+65">üá∏üá¨ +65</option>
                <option value="+1">üá∫üá∏ +1</option>
                <option value="+91">üáÆüá≥ +91</option>
              </select>
              <input type="tel" id="phone" placeholder="8123456789" required>
            </div>
          </div>
                <div class="form-group">
        <label for="password">Kata Sandi</label>
        <input type="password" id="password" placeholder="Masukkan kata sandi" required>
      </div>
      <div class="form-check">
  <input type="checkbox" id="showPass" onclick="showHide()">
  <label for="showPass">Tampilkan Password</label>
</div>
<br>
          <button type="submit">Daftar</button>
        `;
          switchText.innerHTML = `Sudah punya akun? <a href="#" id="switch-link">Login</a>`;
        } else {
          formTitle.innerText = "Masuk ke Akun";
          authForm.innerHTML = `
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" placeholder="Masukkan email" required>
          </div>
      <div class="form-group">
        <label for="password">Kata Sandi</label>
        <input type="password" id="password" placeholder="Masukkan kata sandi" required>
      </div>
      <div class="form-check">
  <input type="checkbox" id="showPass" onclick="showHide()">
  <label for="showPass">Tampilkan Password</label>
</div>
          <div class="forgot">
            <a href="#" id="forgot-link">Lupa kata sandi?</a>
          </div>
          <button type="submit">Masuk</button>
        `;
          switchText.innerHTML = `Belum punya akun? <a href="#" id="switch-link">Daftar</a>`;
        }
        isLogin = !isLogin;
        bindLinks();
      }

      // Ganti ke form reset password
      function showForgotPasswordForm() {
        formTitle.innerText = "Reset Kata Sandi";
        authForm.innerHTML = `
        <div class="form-group">
          <label for="reset-email">Email terdaftar</label>
          <input type="email" id="reset-email" placeholder="Masukkan email Anda" required>
        </div>
        <button type="submit">Kirim Tautan Reset</button>
      `;
        switchText.innerHTML = `<a href="login.html" id="back-login">Kembali ke Login</a>`;
        bindLinks();
      }

      // Event listener link
      function bindLinks() {
        const newSwitchLink = document.getElementById("switch-link");
        const forgotLink = document.getElementById("forgot-link");
        const backLogin = document.getElementById("back-login");

        if (newSwitchLink) {
          newSwitchLink.addEventListener("click", (e) => {
            e.preventDefault();
            toggleForm();
          });
        }
        if (forgotLink) {
          forgotLink.addEventListener("click", (e) => {
            e.preventDefault();
            showForgotPasswordForm();
          });
        }
        if (backLogin) {
          backLogin.addEventListener("click", (e) => {
            e.preventDefault();
            showLogin();
          });
        }
      }

      // √¢≈ì‚Ä¶ Handle submit form
      document.addEventListener("submit", (e) => {
        e.preventDefault();

        if (formTitle.innerText === "Masuk ke Akun") {
          localStorage.setItem("isLoggedIn", "true");
          alert("Login berhasil!");
          window.location.href = "../index.html";
        } else if (formTitle.innerText === "Pendaftaran Akun") {
          localStorage.setItem("isLoggedIn", "true");
          alert("Registrasi berhasil! Kamu harus login.");
          window.location.href = "../login/login.html";
        } else if (formTitle.innerText === "Reset Kata Sandi") {
          alert("Tautan reset sudah dikirim ke email.");
          showLogin();
        }
      });

      // Jalankan pertama kali
      bindLinks();

      // Callback Google
      function handleCredentialResponse(response) {
        console.log("ID Token Google:", response.credential);
        localStorage.setItem("isLoggedIn", "true");
        alert("Login Google berhasil!");
        window.location.href = "../index.html";
      }

      function showHide() {
        const passInput = document.getElementById("password");
        const showPass = document.getElementById("showPass");
        passInput.type = showPass.checked ? "text" : "password";
      }
    </script>
  </body>
</html>
